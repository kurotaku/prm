<% content_for(:title, '企業プロフィール編集') %>

<header class="primary-header d-flex align-items-center">
  <div>
    <h1>会社情報編集</h1>
    <p class="mb-0">会社情報の設定ができます</p>
  </div>
</header>

<main class="main-contents">
  <div class="main-center-col w-100">
    <div class="contents-box">
      <h2 class="contents-box-title mb-5">企業情報</h2>

      <%= form_for(@current_company, url: company_page_profile_path, html: { method: :patch, class: 'form-default auto-submit-form' }, local: true) do |f| %>

        <%= render 'shared/error_messages', object: f.object %>

        <div class="form-group">
          <p><%= f.label :postcode %></p>
          <%= f.text_field :postcode, class: 'form-control' %>
        </div>

        <div class="form-group">
          <p><%= f.label :prefecture_id %></p>
          <div class="select-wrap">
            <%= f.collection_select :prefecture_id, Prefecture.all, :id, :name, {}, {class: 'form-control'} %>
          </div>
        </div>

        <div class="form-group">
          <p><%= f.label :address %></p>
          <%= f.text_field :address, class: 'form-control' %>
        </div>

        <div class="form-group">
          <p><%= f.label :address2 %></p>
          <%= f.text_field :address2, class: 'form-control' %>
        </div>

        <div class="form-group mb-5">
          <p class="mb-1"><%= f.label :image %></p>

          <div>
            <div id="company-thumb" class="image-wrap mb-3">
              <%= image_tag @current_company.image.url if @current_company.image.present? %>
              <%= content_tag(:div, '', class: 'image-remove-btn', data: {target: 'company-thumb'}) if current_user.image.present? %>  
            </div>
          </div>
          <%= f.file_field :image, id: 'file-field', class: 'file-field', data: {image: 'company-thumb'}  %>
          <%= f.hidden_field :image_cache, data: {image: 'company-thumb'} %>
          <%= hidden_field_tag :remove_image, params['remove_logo'], class: 'remove_field', data: {image: 'company-thumb'} %>
        </div>

        <%= f.submit t('common.update'), class: 'btn btn-m default' %>
      <% end %>

    </div>
  </div><!-- .main-center-col -->

</main><!-- .main-contents -->
